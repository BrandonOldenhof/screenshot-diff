name: 'Screenshot and Diff'
description: 'Create screenshots of a set of URLs and run diffs between old and new versions'
runs:
  using: 'composite'
  steps:
    - name: Set up node
      uses: actions/setup-node@v2
    - name: Install dependencies
      run: cd $GITHUB_ACTION_PATH && npm install
      shell: bash
    - name: Create screenshots & diffs
      run: cd $GITHUB_ACTION_PATH && npm run start
      shell: bash
    - name: Set current date as env variable
      run: echo "NOW::$(date +'%Y-%m-%dT%H:%M')" >> $GITHUB_ENV
    - name: Echo current date
      run: echo $NOW
    - uses: actions/upload-artifact@v2
      with:
        name: $NOW
        path: $GITHUB_ACTION_PATH/screenshots

